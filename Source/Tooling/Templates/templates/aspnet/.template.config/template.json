{
    "$schema": "http://json.schemastore.org/template",
    "author": "Aksio",
    "classifications": [
        "Microservice",
        "Common",
        "AspNet"
    ],
    "identity": "Aksio.Templates.AspNet",
    "name": "Aksio Microservice Template for AspNet",
    "shortName": "aksioms",
    "tags": {
        "language": "C#",
        "type": "project"
    },
    "symbols": {
        "IncludeWeb": {
            "type": "parameter",
            "description": "Include a Web frontend?",
            "datatype": "bool",
            "defaultValue": "false"
        }
    },
    "sourceName": "AksioMicroserviceTemplate",
    "sources": [
        {
            "modifiers": [
                {
                    "condition": "(!IncludeWeb)",
                    "exclude": [
                        "Web/**/*"
                    ]
                }
            ]
        }
    ],
    "postActions": [
        {
            "description": "Add latest version of Aksio.Defaults",
            "actionId": "B17581D1-C5C9-4489-8F0A-004BE667B814",
            "continueOnError": true,
            "manualInstructions": [
                {
                    "text": "dotnet add package Aksio.Defaults"
                }
            ],
            "args": {
                "targetFiles": [
                    "./Concepts/Concepts.csproj",
                    "./Domain/Domain.csproj",
                    "./Events/Events.csproj",
                    "./Read/Read.csproj",
                    "./Main/Main.csproj"
                ],
                "referenceType": "package",
                "reference": "Aksio.Defaults",
                "projectFileExtensions": "**/*.csproj"
            }
        },
        {
            "description": "Add latest version of Aksio.Microservices",
            "actionId": "B17581D1-C5C9-4489-8F0A-004BE667B814",
            "continueOnError": true,
            "manualInstructions": [
                {
                    "text": "dotnet add package Aksio.Microservices"
                }
            ],
            "args": {
                "targetFiles": [
                    "./Concepts/Concepts.csproj",
                    "./Domain/Domain.csproj",
                    "./Events/Events.csproj",
                    "./Read/Read.csproj",
                    "./Main/Main.csproj"
                ],
                "referenceType": "package",
                "reference": "Aksio.Microservices",
                "projectFileExtensions": "**/*.csproj"
            }
        },
        {
            "description": "Add latest version of Aksio.Specifications",
            "actionId": "B17581D1-C5C9-4489-8F0A-004BE667B814",
            "continueOnError": true,
            "manualInstructions": [
                {
                    "text": "dotnet add package Aksio.Specifications"
                }
            ],
            "args": {
                "targetFiles": [
                    "./Domain.Specs/Domain.Specs.csproj",
                    "./Read.Specs/Read.Specs.csproj"
                ],
                "referenceType": "package",
                "reference": "Aksio.Specifications",
                "projectFileExtensions": "**/*.csproj"
            }
        },
        {
            "description": "Restore NuGet packages required by this project.",
            "actionId": "210D431B-A78B-4D2F-B762-4ED3E3EA9025",
            "continueOnError": true,
            "manualInstructions": [
                {
                    "text": "Run 'dotnet restore'"
                }
            ],
            "args": {
                "files": [
                    "./Main/Main.csproj"
                ]
            }
        },
        {
            "condition": "(IncludeWeb)",
            "description": "Install node modules required by this project.",
            "actionId": "3A7C4B45-1F5D-4A30-959A-51B88E82B5D2",
            "continueOnError": true,
            "manualInstructions": [
                {
                    "text": "Run 'yarn' from the Web folder"
                }
            ],
            "args": {
                "executable": "yarn",
                "args": "install --cwd ./Web",
                "redirectStandardOutput": "true"
            }
        },
        {
            "description": "Instructions for starting backend",
            "actionId": "AC1156F7-BB77-4DB8-B28F-24EEBCCA1E5C",
            "manualInstructions": [
                {
                    "text": "To run the backend; run the following command from the Main folder"
                }
            ],
            "args": {
                "executable": "dotnet",
                "args": "run"
            }
        },
        {
            "description": "Instructions for starting frontend",
            "actionId": "AC1156F7-BB77-4DB8-B28F-24EEBCCA1E5C",
            "manualInstructions": [
                {
                    "text": "To run the frontend; run the following command from the Web folder"
                }
            ],
            "args": {
                "executable": "yarn",
                "args": "start:dev"
            }
        }

    ],
    "preferNameDirectory": true
}